apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: trip-service-pool
  namespace: metallb-system
spec:
  addresses:
  # 👇 PC 네트워크에 맞게 설정 (192.168.200.0/22 대역)
  # 이전에 Docker Desktop의 서브넷도 변경해주어야합니다.
  # Docker Desktop - 설정 - Resources - Network - Docker Subnet 192.168.203.0/24
  - 192.168.203.100-192.168.203.110  # 10개 IP 할당
  # ipconfig를 통해 확인된 현재 네트워크 대역
  # -> Wi-Fi IPv4 주소: 192.168.202.39 (192.168.200.0/22 대역)
  # 203.100-110 대역은 일반적으로 DHCP가 사용하지 않는 범위

  # 대안 1: 단일 IP
  # - 192.168.1.100/32

  # 대안 2: CIDR 범위
  # - 192.168.1.100/29  # 192.168.1.100-107 (8개 IP)

  # 주의: 이 IP들은 다른 장치에서 사용하지 않는 범위여야 함
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: trip-service-l2
  namespace: metallb-system
spec:
  ipAddressPools:
  - trip-service-pool
  # L2 모드: 같은 네트워크 세그먼트에서 ARP로 IP 광고